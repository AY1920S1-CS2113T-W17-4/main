= OOF (Outstanding Organisation Friend) - Developer Guide
:site-section: DeveloperGuide
:toc:
:toclevels: 3
:toc-title:
:toc-placement: preamble
:sectnums:
:figure-caption: Figure
:table-caption: Table
:imagesDir: images
:stylesDir: stylesheets
:xrefstyle: full
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:warning-caption: :warning:
:experimental:
endif::[]
:repoURL: https://github.com/AY1920S1-CS2113T-W17-4/main/tree/master

By: `Team W17-4`      Since: `Aug 2019`      Licence: `MIT`

== Introduction
OOF, short for Outstanding Organisation Friend, is a command line interface dekstop application built to improve University Students productivity and efficiency by reducing the need to manually organise tasks. This guide aims to provide information not just to new contributors of OOF but also to current contributors so that it can serve as an easy reference for understanding the features implemented in OOF.

== Setting up
This section will show you the steps that you need to quickly start contributing to this project in no time!

[[Prerequisites]]
=== Prerequisites
. *JDK `11`* or above +
[NOTE]
The `oof.jar` file is compiled using the Java version mentioned above. +
. *IntelliJ* IDE
[NOTE]
IntelliJ by default has Gradle and JavaFx plugins installed.
Do not disable them. If you have disabled them, go to `File` > `Settings` > `Plugins` to re-enable them.

=== Setting up the project in your computer
. Fork this repo, and clone the fork to your computer
. Open IntelliJ (if you are not in the welcome screen, click `File` > `Close Project` to close the existing project dialog first)
. Set up the correct JDK version for Gradle
.. Click `Configure` > `Project Defaults` > `Project Structure`
.. Click `New...` and find the directory of the JDK
. Click `Import Project`
. Locate the `build.gradle` file and select it. Click `OK`
. Click `Open as Project`
. Click `OK` to accept the default settings
. Open a console and run the command `gradlew processResources` (Mac/Linux: `./gradlew processResources`). It should finish with the `BUILD SUCCESSFUL` message. +
This will generate all the resources required by the application and tests.

=== Verifying the setup

. Run `Oof` and try a few commands
. Run tests to ensure they all pass. _(coming soon)_

== Design

[[Design-Architecture]]
=== Architecture

[[ArchitectureDiagram]]
.Architecture Diagram
image::ArchitectureDiagram.png[ArchitectureDiagram]

The *_Architecture Diagram_* shown above depicts the high-level construct of *_OOF_*.
Given below is a quick overview of each component.

* `Oof` has only one class called `Oof` that is responsible for:
** Bootstrapping process for initialising instances of classes in the `Ui`, `Storage` and `Command` packages.
** Handling your input during runtime and terminating the program when you wish to exit from *_OOF_*.

* `Ui` package is responsible for visual feedback and taking in your input.

* `Command` package contains all of *_OOF's_* commands.

* `Model` package contains all the object containers that are used by our `commands`.

* `Storage` package contains class files to help store all your data to the hard disk.

* `OofException` contains classes to print customised error messages when things are not going as expected.

=== UI component

=== Logic component

=== Model component

=== Storage component

=== Common classes

== Implementation

=== Recurring task feature

==== Implementation

The `RecurringCommand` class extends `Command` by providing methods to set a current `Task` in the persistent `TaskList` of the main program `OOF` as a recurring task. It also generates future instances of `Task` as indicated by the user.

[NOTE]
`TaskList` is stored internally as an `ArrayList` in the Oof Program as well as externally in persistent storage in `output.txt`.

Additionally, it consists of the following features:

* User can select a `Task` in the `TaskList` to be a recurring task.
* User can choose an integer between `1 - 10` inclusive for the number of times the task should recur.
* User can choose an integer between `1 - 4` inclusive for the `Frequency` of recurrence.

The choices are as follows: +
+1.+ DAILY +
+2.+ WEEKLY + 
+3.+ MONTHLY +
+4.+ YEARLY +

These features are implemented in the `parse` method of the `CommandParser` class that parses user input commands.

Given below is an example usage scenario and how the `RecurringCommand` class behaves at each step.

*Step 1.* +
The user types in `recurring 1 1 1`. The `parse` method in `CommandParser` class is called to parse the command to obtain integers `1` as the `Index` of the `Task` in `TaskList`, `1` as the `number of recurrences` and `1` as the `frequency` of recurrence.

[WARNING]
Customised `MissingArgumentException` and `InvalidArgumentException` will be thrown if the user enters invalid commands.

*Step 2.* +
A new instance of `RecurringCommand` class is returned to the main `Oof` program with the parameters `1, 1, 1` as described above. The `execute` method of `RecurringCommand` class is then called.

*Step 3.* +
The `setRecurringTask` method in `RecurringCommand` class is then called by `execute` method. This method does three main things: 

* Calls `getTask` method from `TaskList` class to get the user selected `Task`.
* Updates the `Task` to a `recurring Task` by: +
** Calling `setFrequency` method in `Task` class to set `Frequency` to `DAILY`
** Calling `deleteTask` and `addTaskToIndex` methods in `TaskList` class to update the selected `Task`.
* Calls `recurInstances` method in `RecurringCommand` class to set upcoming recurring `Tasks` based on user selected `Number of recurrences` and `Frequency` by:
** `recurInstances` method calls `dateTimeIncrement` method in `RecurringCommand` class to increment the `DateTime` based on the user input `Frequency`.

*Step 4.* +
After `setRecurring` method finishes its execution, the `execute` method continues on to print the updated `TaskList` by calling `printRecurringMessage` method in `Ui` class and saves the new `Tasks` into persistent storage by calling `writeToFile` method in `Storage` class.

The following sequence diagram summarises what happens when a user executes a new command:

[[RecurringCommandSequenceDiagram]]
.Sequence diagram for Recurring Command
image::RecurringCommandSequenceDiagram.png[RecurringCommandSequenceDiagram]

==== Design Considerations

* *Selecting currently available `Task` to be set as a `recurring Task`*
** Rationale: +
It allows the `RecurringCommand` class to capitalise on the existing features of adding `Deadlines` and `Events`.
** Alternatives considered: +
Allow users to add new `recurring Task` instead of selecting from existing `Tasks`. Allowing users to add new recurring tasks strongly overlaps with existing features and this increase coupling in the `OOF` program.
* *Fixing lower bound and upper bound of the `Number of recurrences` to be `1` and `10` respectively*
** Rationale: + 
It ensures a controlled number of recurrences are added to the `TaskList` instead of being a variable amount as a user may unintentionally break the `TaskList`.
** Alternatives considered: + 
Insert an upcoming recurring task when the `recurring Task` is nearing. There may be too many `Tasks` to keep track and add when `OOF` starts up especially in the case when the number of `Tasks` in the `TaskList` gets potentially large. This decreases the scalability of the project in the long run.
* *`Frequency` fixed to four different default frequencies*
** Rationale: + 
It requires significantly less effort to choose from a default list of four options than to manually type in customised time ranges.
** Alternatives considered: +
Users can enter a customised `Frequency` for the `recurring Task`. It may be a viable option to allow users to set such parameters. However, since the `OOF` program is solely a Command Line Interface program, it may not be user friendly for users to enter so many details just to set a customised `Frequency` for the `recurring Task`.

=== Help feature
==== Implementation
The `HelpCommand` class extends the `Command` class by providing functions to display a manual with the list of `Command` available and how they may be used in the main program `OOF`.

[NOTE]
The list of `Command` and their instructions are stored externally in persistent storage in `manual.txt`.

Additionally, it contains the following feature:

* User may request for `Help` with a specific command.

All `Help` features are implemented in the `parse` method of `CommandParser` class that parses user input.

Provided below is an example scenario of use and how `HelpCommand` class behaves and interacts with other relevant classes.

*Step 1:* +
The user enters the `help Deadline`. The `parse` method in `CommandParser` class is called to parse the user input to obtain the String `Deadline` as the `keyword` that the user requires `Help` for.

[WARNING]
`OofException` will be thrown is the user enters an invalid command.

*Step 2:* +
The `execute` method of `HelpCommand` class will read the list of `Command` and their instructions from persistent storage in `manual.txt` and store them into a `commands` ArrayList by calling the `readManual` method from `Storage` class.

* *Step 2a:* +
The `readManual` method of `Storage` class will retrieve and read `manual.txt` from persistent storage by using `FileReader` abstraction on `File` abstraction.
* *Step 2b:* +
The `BufferedReader` abstraction will then be performed upon `FileReader` abstraction to allow `manual.txt` to be read line-by-line, adding each line as an element of the `commands` ArrayList. The `commands` ArrayList is then returned to the `execute` method of `HelpCommand` class.

[WARNING]
`OofException` will be thrown if `manual.txt` is unavailable, resulting in `IOException` getting caught.

*Step 3:* +
If the `keyword` is empty, the `printHelpCommands` method of `Ui` class will be called. The elements of `commands` ArrayList will then be printed in ascending order through the use of a for loop. +

If the `keyword` is specified, the `individualQuery` method of `HelpCommand` class will be called with the `keyword` and `commands` ArrayList as parameters.

* *Step 3a:* +
The first segment of each element in the `commands` ArrayList will be retrieved by adding a String `command` delimited by two whitespaces.

* *Step 3b:* +
Once a check is completed to ensure that `command` is not empty, both `keyword` and `command` String will be formatted through the use of `toUpperCase` function and String comparison will be performed through the use of `equals`.
If they match, that particular element of `commands` ArrayList will be stored into a String called `description` and the for loop will break before returning `description` to the `execute` method of `HelpCommand`.

[WARNING]
`OofException` will be thrown is no successful match between `keyword` and `command` String is found.

*Step 4:* +
The `execute` method of `HelpCommand` calls `printHelpCommand` in `Ui` class with `description` String as the parameter. This is where the individual `Command` and its instruction will be printed.

The following activity diagram summarises what will happen when a user executes a `Help` command:

[[HelpCommandActivityDiagram]]
.Activity diagram for Help Command
image::HelpCommandActivityDiagram.png[HelpCommandActivityDiagram]

==== Design Considerations
* Created `manual.txt` to store available commands and their instructions
** Rationale: +
With scalability in mind, the use of persistent storage will grant developers a common location to update the list of `Command` and their instructions.

** Alternatives Considered: +
Numerous String variables can be added to an ArrayList through the `HelpCommand` class. This would not require the use of `File`, `FileReader` or `BufferedReader` abstractions.
However, this would bring developers inconvenience during project extension as more functions will be added and this may eventually lead to unorganised code, especially in the `HelpCommand` class.

* Implement ArrayList to display `Help` for an individual command and its instructions
** Rationale: +
The use of ArrayList offers flexibility due to its unconfined size. This allows increased convenience and scalability due to the large list of `Command` and their instructions available to our users.

** Alternatives Considered: +
The use of an Array will allow increased efficiency given the smaller number of `Command` we had in our earlier versions, such as `v1.1`.
However, this is not a beneficial solution in the long run as we create extensions and expand upon `OOF`.

=== View tasks for the week feature

[[ViewweekParam]]
.Output of ViewWeek Command
image::ViewweekParam.png[ViewweekParam]

==== Implementation

The `ViewWeekCommand` class extends `Command` by providing methods to display tasks for a particular week.

[NOTE]
The command can be run in the `OOF` program without a specific `date` e.g. `viewweek` instead of `viewweek 01 01 2019`. In this case, the `ViewWeek` command prints tasks for the current week. The same applies if the date entered by the user is invalid.

Features elaborated:

* The output of the `ViewWeekCommand` is ANSI colour enabled.This distinguishes the different days of the week in the output.

[WARNING]
As the output is ANSI colour enabled, there is a need to enable ANSI colour support on Windows machines.

.Fixes for Windows command line
[cols="30%, 70%"]
|===
|*Type of fix*|*Description*
|Permanent fix|
Enter the command `CMD / POWERSHELL: reg add HKCU\Console /v VirtualTerminalLevel /t REG_DWORD /d 1` in either `CMD` / `POWERSHELL`.

Launch a new console window to activate the changes.

_Disable line wrapping in terminal for optimal view._|
Adhoc fix for `POWERSHELL`|
run `OOF` with the command `java -jar .\v1.X.jar \| Out-Host`|
|===

[NOTE]
Batch files have been included to automate the fixes. Clicking `settings.bat` satisfies the requirements stated above.

* The output of `ViewWeekCommand` resizes automatically based on the length of the `description` of tasks.

[[ViewWeekLarge]]
.Automatic resize feature in ViewWeek Command
image::ViewWeekLarge.png[ViewWeekLarge]

Given below is an example usage scenario and how the `ViewWeekCommand` class behaves at each step.

[NOTE]
Due to heavy abstraction in the Ui and the limitation of the software used to draw UML diagrams, trivial helper functions in the Ui to print the output will be omitted.

*Step 1.* +
The user types in `viewweek`. The `parse` method in the `CommandParser` class returns a new `ViewWeekCommand` object.

*Step 2.* +
Since no date is passed by the user, the constructor for `ViewWeekCommand` class retrieves the current date using the `calendar.get()` methods. The `execute` method in `ViewWeekCommand` class is then called by the `Oof.run()` method in the main class `Oof`.

*Step 3.* +
In the `execute` method, the first day of the week is retrieved using the `getStartDate()` method in  the current class for indexing purposes. Tasks are to be sorted into the data structure of `ArrayList<ArrayList<String[]>>` called `calendarTasks`. The size of `calendarTasks` is `7` which represents each day in the current week. Each index in `calendarTasks` is an `arrayList`of `string[]` which represents the tasks in that respective day of the week in the form of `{TIME, DESCRIPTION}`.

*Step 4.* +
The `execute` method iterates through the current list of tasks and parses the `date`, `time` and `description` of each task. The `dateMatches()` method is then called to verify if the task falls in the same week as the current week. If the current task falls in the current week, the `date` of the task is compared with the first day of the week to obtain an `index` to slot the task into calendarTasks.

*Step 5.* +
The task is then added to calendarTask using the `addEntry()` method. After iterating through the current list of tasks, the `printViewWeek() method` in `Ui` class is then called to print the tasks for the current week.

*Step 6.* +
In the `printViewWeek()` method, 3 main methods are being called to print the final output. Firstly, `printViewWeekHeader()` method is called to print the header of the output which consists of the top border and the days of the current week.

*Step 7.* +
Secondly, `printViewWeekBody()` method is called to print the dates of the current week in the next line of output.

*Step 8.* +
Lastly, `printViewWeekDetails()` method is called to print relevant empty lines, tasks and the bottom border of the final output.

The following sequence diagram summarises what happens when a user executes a new command:

[[ViewWeekSequenceDiagram]]
.Sequence diagram for ViewWeek Command
image::ViewWeekSequenceDiagram.png[ViewWeekSequenceDiagram, width="890"]

[NOTE]
Trivial details that are not important in describing the implementation of the feature are left out.

==== Design Considerations

* *Resizing column size instead of wrapping description of tasks*
** Rationale: +
Each task has a different description length and timing. Thus, it may be difficult to come up with a logic to wrap at indexes that make the output sensible. Furthermore, it is more difficult to find a one size fits all logic than to resize the columns to fit the task `description` and `time`.
** Alternatives considered: +
Truncating the description of tasks so that no resizing nor wrapping is needed. A lot of information may be lost in this process and the `ViewWeekCommand` may not be very useful to the user in this case.
* *Coloured output instead of plain output*
** Rationale: +
It demarcates the header and borders of the output and highlights the dates shown in the `ViewWeekCommand` output. Without the coloured scheme, users still need to scan through the headers to realise the useful task information is located below it.
** Alternatives considered: +
The tasks each day can be classified into visual blocks to aid the users into visualising the timeline each day. In addition to that, the tasks each day has already been chronologically sorted in the `ViewWeekCommand` class. This alternative can be an extension to be used in conjunction with `Find free time slots` in future milestones.

=== View calendar for a month feature

[[calendar]]
.Sample output of Calendar Command
image::calendar.png[calendar]

==== Implementation
The `CalendarCommand` class extends `Command` by providing methods to display tasks for a particular month.

[NOTE]
The command can be executed without the `month` and `year` argument e.g. `calendar` instead of `calendar 10 2019`. In this case, the `calendar` command prints the calendar and task for the current month and year. The same applies if the month and year entered by the user are invalid.

The following is an example execution scenario and demonstrates how the `CalendarCommand` class behaves and interacts with other relevant classes.

*Step 1* +
The user enters the command `calendar 10 2019`. The `parse` method in the `CommandParser` class is called to parse the command to obtain an array containing `10` and `2019` as it elements as arguments for the `CalendarCommand` class returned by the `CommandParser` class.

*Step 2* +
The constructor for the `CalendarCommand` class will parse and validate the arguments, `10` and `2019`, in the argument array.
[NOTE]
An `IndexOutOfBoundsException` will be thrown if less than 2 arguments are provided, a `NumberFormatException` will be thrown if the argument provided is not an integer while an `OofException` will be thrown if `month` argument is not within `1` and `12`. In these cases, the program will retrieve the current `month` and `year` from the system.

*Step 3* +
The `execute` method in the `CalendarCommand` class is then called by the `executeCommand()` method in the `Oof` class. This method does the following:

* Iterates through the `ArrayList` of `Task` from the `TaskList` class and checks if the `Task` belongs to the queried `month` and `year` using the `verifyTask` method.
* `Task` belonging to the queried `month` and `year` are added to the `ArrayList` corresponding to its `day`.
* Each `ArrayList` is then sorted in ascending order of `time` using the `SortByDate` comparator.
[NOTE]
Since `Todo` objects do not have a `time` attribute, they are always sorted to the front of the `ArrayList`.
* `execute` then calls the `printCalendar` method in the `Ui` class.

*Step 4* +
`printCalendar` calls `printCalendarLabel`, `printCalendarHeader` and `printCalendarBody` to print the calendar:

* `printCalendarLabel` prints the `month` and `year` being queried.
* `printCalendarHeader` prints the header of the calendar which consists of the top border and the days of a week.
* `printCalendarBody` prints each day of the week and corresponding tasks belonging to each day.

The following sequence diagram summarises what happens when a user executes a `CalendarCommand`:

[[CalendarSequenceDiagram]]
.Sequence diagram for Calendar Command
image::CalendarSequenceDiagram.png[CalendarSequenceDiagram, width="890"]

==== Design Considerations

* Extending row size instead of limiting the number of tasks displayed
** Rationale: +
Limiting the number of tasks displayed might misrepresent the number of `Task` a person has for that day.
** Alternatives considered: +
Implementing a GUI which includes a scroll pane for each day such that calendar size can be fixed.
* Truncation of task name instead of extending column size
** Rationale: +
Since row size is extendable, extending column size would severely affect readability when column and row sizes increase independently of each other. Also, `ScheduleCommand` class can be used in conjunction with `CalendarCommand` to allows the user to view the list of tasks for any date.
** Alternatives considered: +
Wrapping of task name which will allow the display of the full task name. Not feasible as it will increase the number of rows further.

=== Find free time slots feature

==== Implementation

The `FreeCommand` class extends `Command` by providing methods to search for free time slots by determining if `Event` times stored in the persistent `TaskList` of the main program `OOF` clashes with a default time slot of 07:00 to 00:00 in the user-specified date.

[NOTE]
`TaskList` is stored internally as an `ArrayList` in the Oof Program as well as externally in persistent storage in `output.txt`.

All features are implemented in the parse method of the CommandParser class that parses user input commands.

Given below is an example usage scenario and how the `FreeCommand` class behaves at each step.

*Step 1.* +
The user enters `free 30-10-2019`. The `parse` method in the `CommandParser` class is called to parse the input to obtain `30-10-2019` as the date to search for free time slots in.

[WARNING]
`OofException` will be thrown if the user enters an invalid command.

*Step 2.* +
The `execute` method in `FreeCommand` class is then called by the `Oof.run()` method in the main class `Oof`.

*Step 3.* +
The `findFreeTime` method in `FreeCommand` class is then called by the `execute` method. This method does the following:

* Iterates through the the current list of `Task` from the `TaskList` class and checks if an `Event` lies within the date given.
* All 'Event' corresponding to the date given will be added to an `ArrayList` corresponding to `eventsOnSameDay`, `eventStartTimes` and `eventEndTimes`.
* Calls `sort` method in `Collections` class to sort all `Event` start and end times in ascending order.
* Checks if an `Event` coincides with a time slot.
* Prints the time slots with the relevant details by:
** Calling `printEventDescription` method in `Ui` class if `Event` coincides with the time slot
** Calling `printFreeSlot` method in `Ui` class if `Event` does not coincide with the time slot.

The following activity diagram summarises what happens when a user executes a new command:

[[FreeCommandActivityDiagram]]
.Activity diagram for Free Command
image::FreeCommandActivityDiagram.png[FreeCommandActivityDiagram]

==== Design Considerations

* *Selecting a single date to search free time slots in.*
** Rationale: +
It allows the user to view which time slots they have free time in for a specific day so that they can quickly schedule
team meetings.
** Alternatives considered: +
Allow users to specify an end date in which they want to search for free time slots up to instead of just a single date.
Allowing users to do so will result in displaying unwanted time slots such as during hours where users are
resting which would lead to a redundant display of free time slots.

* *Displaying free time slots in hourly blocks.*
** Rationale: +
This would give users a clean and easy view of the free time slots for that specific day.
** Alternatives considered: +
Show free time slots in user-specified time blocks. This alternative can be an extension of the current implementation
of the `FreeCommand` class.

=== Time Tracker feature
==== Implementation
The `ViewTrackerCommand` class extends the `Command` class by providing functions to display a histogram
visualising the amount of time spent on each `Module`.

Also, it contains the following feature:

* User may `ViewTracker` by `Day` with a specific command.
* User may `ViewTracker` by `Week` with a specific command.

Provided below is an example scenario of use and how `ViewTrackerCommand` class behaves and interacts with other relevant classes.

*Step 1:* +
The user enters the `viewTracker`.
The `execute` method of `ViewTrackerCommand` class will read and save all `TrackerList` objects saved in persistent storage, `tracker.csv` through the `Storage.readTrackerList()` method in the `Storage` class.

* *Step 1a:* +
The `readTrackerList` method in `Storage` class will retrieve and read `tracker.csv` from persisitent storage by using `FileReader` on `File`.

* *Step 1b:* +
The `BufferedReader` will then be performed upon `FileReader` to allow `tracker.csv` to be read line-by-line, calling the `processLine` method each time.

* *Step 1c:* +
The `processLine` method of `Storage` class will split each line into its respective fields through the use of a `,` delimiter before parsing and assign them into the correct fields.
A new `Tracker` object will be created with the processed data and returned to the `readTrackerList` method.

* *Step 1d:* +
The `Tracker` object returned to `readTrackerList` will be added into the `TrackerList` object and upon completing the entire `tracker.txt` file, the final `TrackerList` object will be returned to the `execute` method of `ViewTrackerCommand`.

[WARNING]
`OofException` will be thrown is `tracker.csv` cannot be processed.

*Step 2:* +
The `execute` method of `ViewTrackerCommand` class will then call upon the `timeSpentByModule` method of `ViewTrackerCommand`.
This is where each `Tracker` object in the `TrackerList` object will be processed by their `ModuleCode` property.

* *Step 2a:* +
A `ModuleTrackerList` object is created.
The `ModuleCode` of `Tracker` object is retrieved and the `ModuleTrackerList` object is searched for a `ModuleCode` property of `ModuleTracker` object that matches that of the `ModuleCode` in the `Tracker` object.

* *Step 2b:* +
If a match is found, the `TimeTaken` property of the `Tracker` object will be added to the `TimeTaken` property of the `ModuleTracker` object, updating the `ModuleTrackerList` object before the search is ended.
This will continue until all `Tracker` objects of the `TrackerList` object are processed.

* *Step 2c:* +
The `ModuleTrackerList` object will then be returned to the `execute` method of `ViewTrackerCommand`.

[WARNING]
`OofException` will be thrown if the `ModuleTrackerList` is empty.

*Step 3:* +
The `execute` method of `ViewTrackerCommand` class will then call upon the `sortAscending` method of `ViewTrackerCommand` class.
This is where the `ModuleTrackerList` will be sorted in ascending order according to their `TimeTaken` property.

* *Step 3a:* +
An ArrayList of `ModuleTracker` objects is created and updated with the `ModuleTracker` objects of the `ModuleTrackerList`.

* *Step 3b:* +
The ArrayList is then processed and sorted by their `TimeTaken` property through the `Collections.sort` method.

* *Step 3c:* +
A new `ModuleTrackerList` object is created and updated with the `ModuleTracker` elements of the sorted ArrayList and returned to the `execute` method of `ViewTrackerCommand`.

*Step 4:* +
The `execute` method of `ViewTrackerCommand` calls `printTrackerDiagram` in the `Ui` class with the new `ModuleTrackerList` as the parameter.
This is where the tracker diagram will be printed.

The following activity diagram summarises what will happen when a user executes a `ViewTracker` command:

image::ViewTrackerCommandActivityDiagram.png[]

==== Design Considerations
* *Creating `tracker.csv` to store past entries and their associated information*
** Rationale: +
With scalability in mind, the use of persistent storage will grant our users access to previous `Tracker` entries that they have made and allow our tracker diagram to be generated over a more extensive range of entries made before the current run of *OOF*.
The use of `.csv` format for persistent storage and delimiting each respective field by `,`.
As some data fields can contain multiple whitespaces and tabs, the use of a whitespace delimiter may affect the processing algorithm negatively.
The use of a comma is also less likely in module codes, task descriptions, and dates.

** Alternatives Considered: +
The use of `.txt` and delimited by `\t` has been considered.
However, the use of a tab may interfere with the processing algorithm should the user input contains four consecutive whitespaces -- which is processed as an equivalent to `\t`.

* *Implementation of both `Tracker` and `TrackerList` as well as ModuleTracker` and `ModuleTrackerList` classes*
** Rationale: +
With future expansions in mind, this will allow two different forms of categorisation throughout the `Tracker` feature.
This will ultimately facilitate the expansion the `ViewTrackerComamnd` feature to showcase a histogram sharing total time spent sorted either by
*** `ModuleCode` of `ModuleTracker` objects in `ModuleTrackerList`
*** `description` of `Tracker` objects in `TrackerList`.

** Alternatives Considered: +
The implementation of `Tracker` and `TrackerList` alone would be enough to facilitate the time spent on each Assignment
and allow the user to view a histogram of the amount of time spent on each Assignment.

* *Splitting the `timeTaken` property in `ModuleTrackerList` into blocks of ten minutes in the histogram*
** Rationale: +
As more Assignments get completed over time, the `timeTaken` property in `ModuleTracker` objects will increase exponentially.
With the estimated ten work hours weekly on each module, this may result in hundreds of minutes spent on `Assignment` for each `ModuleCode`.
By splitting the `timeTaken` property in `ModuleTrackerList` into blocks of ten minutes, the number of `#` printed will reduce drastically and allow a more compact diagram to be printed without compromising its accuracy beyond tolerance.

** Alternatives Considered: +
Without the splitting of the `timeTaken` property of `ModuleTracker` objects in the `ModuleTrackerList`, an additional variable `segmentedTimeTaken` will not be required and the user will be able to see a more accurate histogram
as it will be printing one `#` to represent one minute instead.

=== Logging

=== Configuration

== Documentation

== Testing

== Dev Ops

[appendix]
== Product Scope 

*Target User Profile*: 

* Needs to manage multiple tasks at once
* Prefer desktop Command-Line-Interface (CLI) over other types
* Able to type on the keyboard fast
* Prefers typing over mouse input
* Proficient in using CLI applications

*Value proposition*: manage tasks faster than a typical mouse/GUI driven app

[appendix]
== Requirements

=== User Stories

Priorities: High (must have) - `* * \*`, Medium (nice to have) - `* \*`, Low (unlikely to have) - `*` +

[cols="5%,10%,10%,15%,30%,30%"]
.Table consolidating the user stories
|===
|*S/N*|*Use Case No*|*Priority Level*|*As a ...*|*I can ...*|*So that I ...*
|01|01|* * *|University Student|Add a task|Won’t forget the tasks I have to complete
|02|02|* * *|University Student|Mark a task as complete|Can keep track of what is left to be completed
|03|03|* * *|University Student|View my tasks in a calendar|Can manage my time properly
|04|04|* *|University Student|View a summary of tomorrow’s task|Will know what to expect for the next day
|05|05|* * *|University Student|Add an event with the relevant dates, start and end times|Can keep track of my upcoming appointments and examinations
|06|06|* * *|University Student|Get reminders of deadlines due within 24 hours|Can prioritize those tasks to be completed first
|07|07|* * *|University Student|Sort my tasks|Can see my tasks in chronological order
|08|08|*|University Student|Find my tasks|Do not need to scroll through the entire calendar to find certain tasks 
|09|09|* *|Double degree University student|Color code the tasks|Can quickly distinguish different type of tasks 
|10|10|* *|University Student|View my tasks for the week|Can plan my time for the week 
|11|11|* * *|Busy University Student|Find free time slots|Will know which dates and times I am free to conduct project meetings 
|12|12|* * *|University Student|Cancel events|Keep my schedule updated 
|13|13|* * *|University Student|Postpone the deadline of tasks|Can properly manage my priorities 
|14|14|* *|University Student who procrastinates|View undone tasks carried forward to the next day in a bright color|Will know what assignments are lagging behind 
|15|15|* * *|University Student|Add a recurring task|Do not have to do it multiple times 
|16||* * *|Impatient University Student|Quickly type in one-liner commands|Can see the tasks being updated in the program quickly
|17||*|University Student|View trends for my tasks|Can see if I am lagging behind
|18||* *|Paranoid University Student|Set the threshold for an alert to complete my tasks|Can stay ahead of my schedule
|19||*|Organized University Student|View all the tasks in a strict format|Will know what to type to enter my tasks 
|20||*|University Student in NUSSU|Export my calendar to a shareable format|Can quickly share my schedule with other people 
|21||* *|University Student|Have a do-after task|Know what tasks need to be done after completing a specific task
|22||* * *|University Student|Have a task that needs to be done within a period |Can better plan my schedule
|23||*|University Student|Add my estimated time taken to complete a task|Know how much free time I would have
|24||* *|Undergraduate Tutor|Have two instances of calendar|Can separate my tutor tasks and personal tasks
|25||* *|University Student|Filter my calendar by different categories|Can view my tasks for that category easier
|26||* * *|University Student|Add a tentative task|Can confirm it at a later date
|27||* * *|University Student|View all commands|Do not need to memorise all the commands
|28||* * *|University Student|Get warnings if an event I add clashes with an existing event|Will not have multiple events at the same time
|29||*|University Student|Sync my tasks to my phone via bluetooth|Can view my tasks on the go and not just on my laptop
|30||**|University Student|Print out my tasks stored|Can view my tasks even if my laptop runs out of battery
|===

=== Use Cases
(MSS refers to Main Success Scenario.)

*System: Outstanding Organization Friend (OOF)* +
*Use case: UC01 - Add a task* +
*Actor: User* + 
*MSS:*

. User wants to add a task.
. OOF requests for description of the task.
. User enters the description of the task.
. OOF records the task and displays the description.

Use case ends.

*Extensions:*

* 3a. OOF detects empty date and time in description of task.
** 3a1. OOF requests for date and time of task.
** 3a2. User enters required data.
** Steps 3a1-3a2 are repeated until the correct data is entered.
** Use case resumes from step 4.
* 3b. OOF detects a clash in date and time with another task.
** 3b1. OOF warns the User of such a clah by displaying the task(s) that clash(es)    	and prompts for continuation or cancellation.
** 3b2. User decides for continuation or cancellation.
** 3b3. OOF requests to confirm decision.
** 3b4. User confirms decision.
** Use case ends if the User decides to cancel the action. Use case resumes from 		step 4 otherwise.
* *a. At any time, User chooses to re-enter task description.
** *a1. OOF requests confirmation to re-enter task description.
** *a2. User confirms to re-enter task description.
** Use case resumes from step 3.

*System: Outstanding Organization Friend (OOF)* +
*Use case: UC02 - Mark a task as complete* +
*Actor: User* +
*MSS:* 

. User wants to mark a task as complete.
. OOF requests for index of task to mark as complete.  
. User enters the index of the task to mark as complete. 
. OOF records the task completion status and displays the description. 

Use case ends.   

*Extensions:*

* 3a. OOF detects non-existent index of task.
** 3a1. OOF requests for existent index and displays a range of indexes to choose from.
** 3a2. User enters required data.
** Use case resumes from step 4. 

*System: Outstanding Organization Friend (OOF)* +
*Use case: UC03 - View tasks in calendar* +
*Actor: User* + 
*MSS:* 

. User wants to view tasks in calendar format.
. OOF requests for range of index of the tasks the user wishes to view in calendar format.
. User enters the range of index of the task to view in calendar format.
. OOF displays the tasks requested in calendar format.

Use case ends.   

*Extensions:*

* 3a. OOF detects non-existent index of task in the range.
** 3a1. OOF requests for existent index and displays a range of indexes to choose from.
** 3a2. User enters required data.
** Use case resumes from step 4. 

*System: Outstanding Organization Friend (OOF)* +
*Use case: UC04 - View a summary of the next day’s tasks* +   
*Actor: User* +
*MSS:*

. User wants to view a summary of the next day’s tasks. 
. OOF requests for user input. 
. User enters the summary command.
. OOF displays the summary of the next day’s tasks.

Use case ends.   

*Extension:*

* 3a. OOF detects there are no tasks for the next day.
** 3a1. OOF prints to the console to warn User that there are no tasks for the next day.
** Use case ends.

*System: Outstanding Organization Friend (OOF)* +
*Use case: UC05 - Adding tasks with date and time* + 
*Actor: User* +
*MSS:*

. User wants to add a task with date, start and end time.
. OOF requests for description, date, start and end time of the task.
. User enters the requested details.
. OOF records the task and displays the task recorded.

Use case ends.

*Extension:*

* 3a. OOF detects an error with the entered data.
** 3a1. OOF requests for the correct data.
** 3a2. User enters new data.
** Steps 3a1-3a2 are repeated until the data entered are correct.
** Use case resumes from step 4.
* *a. At any time, User choose to stop adding a task.
** *a1. OOF requests to confirm the cancellation.
** *a2. User confirms the cancellation.
** Use case ends.

*System: Outstanding Organization Friend (OOF)* +
*Use case: UC06 - Reminder for expiring tasks (within 24hrs)*  +
*Actor: User* +
*MSS:*

. User chooses to activate the reminder for expiring tasks.
. OOF requests for confirmation of this action.
. User confirms the action.
. OOF displays the expiring tasks everytime OOF is started.

Use case ends.

*Extensions:*

* *a. At any time, User chooses to cancel the activation.
** *a1. OOF requests to confirm the cancellation.
** *a2. User confirms the cancellation.
** Use case ends.

*System: Outstanding Organization Friend (OOF)*  +
*Use case: UC07 - Sort tasks in chronological order* +
*Actor: User* +
*MSS:*

. User requests to sort current tasks in chronological order.
. OOF requests for confirmation of this action.
. User confirms this request.
. OOF sorts and displays the tasks in chronological order.

Use case ends.

*Extensions:*

* 4a. OOF detects that there are no tasks to be sorted.
** 4a1. OOF warns User that there are no tasks to be sorted
** Use case ends.
* *a. At any time, User chooses to cancel the request.
** *a1. OOF requests to confirm the cancellation.
** *a2. User confirms the cancellation.
** Use case ends.

*System: Outstanding Organization Friend (OOF)* +
*Use case: UC08 - Find tasks* +
*Actor: User* +
*MSS:* 

. User requests to find certain tasks.
. OOF requests for the description of the tasks.
. User enters a description of the tasks.
. OOF displays the tasks that match the description.

Use case ends.

*Extensions:*

* 3a. OOF detects that there are no tasks that match the description given.
** 3a1. OOF requests for the User to enter a new description.
** 3a2. User enters a new description.
** Steps 3a1-3a2 are repeated until at least one task matches the description.
** Use case resumes from step 4.
* *a. At any time, User chooses the stop finding tasks.
** *a1. OOF requests to confirm the request.
** *a2. User confirms the requests.
** Use case ends.

*System: Outstanding Organization Friend (OOF)* +
*Use case: UC09 - Colour code tasks* +
*Actor: User* +
*MSS:*

. User requests to colour code tasks.
. OOF displays the current tasks present in the program and prompts for the tasks to be colour coded and their respective colours to be coded.
. User enters the required information.
. OOF displays the current tasks present after colour coding the selected tasks.

Use case ends.

*Extensions:*

* 3a. OOF detects an error in the information entered.
** 3a1. OOF prompts for User to enter the correct information.
** 3a2. User enters the correct information.
** Steps 3a1-3a2 are repeated until the User enters in the correct information.
** Use case resumes from step 4.
* 4a. OOF detects that there are no tasks to be colour coded.
** 4a1. OOF displays the warning that no tasks are available to be colour coded.
** Use case ends.
* *a. At any time, User requests to cancel this action.
** *a1. OOF requests to confirm the cancellation.
** *a2. User confirms the cancellation.
** Use case ends.

*System: Outstanding Organization Friend (OOF)* +
*Use case: UC10 - View tasks for the week* +
*Actor: User* +
*MSS:*

. User requests to view tasks for the week.
. OOF requests to confirm the request.
. User confirms the request.
. OOF displays the tasks for the week.

Use case ends.

*Extensions:*

* 4a. OOF detects that there are no tasks for the week.
** 4a1. OOF warns the User that there are no tasks for the week.
** Use case ends.
* *a. At any time, User chooses to cancel this action.
** *a1. OOF requests for confirmation.
** *a2. User confirms the requests.
** Use case ends.

*System: Outstanding Organization Friend (OOF)* +
*Use case: UC11 - Find free time slots* +
*Actor: User* +
*MSS:*

. User requests to find free time slots.
. OOF requests for the time period from the User.
. User enters in the time period of interest.
. OOF displays the free time slots within the time period.

Use case ends.

*Extensions:*

* 3a. OOF detects that the time period entered is invalid.
** 3a1. OOF requests for the User to input a valid time period.
** 3a2. User enters a valid time period.
** Steps 3a1-3a2 are repeated until a valid time period is entered.
** Use case resumes from step 4.
* *a. At any time, User chooses to cancel the action.
** *a1. OOF requests for confirmation.
** *a2. User confirms the request.
** Use case ends.

*System: Outstanding Organization Friend (OOF)* +
*Use case: UC12 - Delete tasks* +
*Actor: User* +
*MSS:*

. User requests to delete tasks.
. OOF lists the current tasks saved in the program and prompts User to select the task to be deleted.
. User chooses the task to be deleted.
. OOF deletes and display the task that was deleted and the number of tasks saved in the program.

Use case ends.

*Extensions:*

* 2a. OOF detects that there are no tasks saved in the program.
** 2a1. OOF warns the User that there are no tasks to be deleted.
** Use case ends.
* 3a. OOF detects an error in the task that was selected by the User.
** 3a1. OOF prompts the user to enter a valid input.
** 3a2. User enters a valid input.
** Steps 3a1-3a2 are repeated until the User enters a valid input.
** Use case resumes from step 4.
* *a. At any time, User chooses to cancel the action.
** *a1. OOF requests for confirmation from the User.
** *a2. User confirms the cancellation.
** Use case ends.

*System: Outstanding Organization Friend (OOF)* +
*Use case: UC13 - Postpone tasks* +
*Actor: User* +
*MSS:*

. User requests to postpone a task.
. OOF displays the current tasks saved in the program and prompts the User the indicate the task to be postponed and its postponed date.
. User enters the task and the postponed date.
. OOF displays the task that was postponed with its new deadline.

Use case ends.

*Extensions:*

* 2a. OOF detects that there are no tasks saved in the program.
** 2a1. OOF warns the User that there are no tasks to be postponed.
** Use case ends.
* 3a. OOF detects an error in the task that was selected by the User.
** 3a1. OOF prompts the user to enter a valid input.
** 3a2. User enters a valid input.
** Steps 3a1-3a2 are repeated until the User enters a valid input.
** Use case resumes from step 4.
* *a. At any time, User chooses to cancel the action.
** *a1. OOF requests for confirmation from the User.
** *a2. User confirms the cancellation.
** Use case ends.

*System: Outstanding Organization Friend (OOF)* +
*Use case: UC14 - Overdue tasks* +
*Actor: User* +
*MSS:* 

. User requests to highlight tasks that are overdue.
. OOF requests to confirm the request.
. User confirms the request.
. OOF displays the overdue tasks

Use case ends.

*Extensions:*

* 3a. OOF detects that there are no overdue tasks.
** 3a1. OOF warns the User that there are no overdue tasks.
** Use case ends.
* *a. At any time, User chooses to cancel the activation.
** *a1. OOF requests to confirm the cancellation.
** *a2. User confirms the cancellation.
** Use case ends.



*System: Outstanding Organization Friend (OOF)* +
*Use case: UC15 - Recurring tasks* +
*Actor: User* +
*MSS:*

. User chooses to add recurring tasks.
. OOF displays the current tasks saved in the program and prompts the User to input the task that is recurring and its respective frequency.
. User enters the task and recurring frequency.
. OOF displays the task selected and automatically adds the recurring task at relevant time intervals.

Use case ends.

*Extensions:*

* 2a. OOF detects that there are no tasks saved in the program.
** 2a1. OOF warns the User that there are no tasks to be marked as recurring.
** Use case ends.
* 3a. OOF detects an error in the task that was selected by the User.
** 3a1. OOF prompts the user to enter a valid input.
** 3a2. User enters a valid input.
** Steps 3a1-3a2 are repeated until the User enters a valid input.
** Use case resumes from step 4.
* *a. At any time, User chooses to cancel the action.
** *a1. OOF requests for confirmation from the User.
** *a2. User confirms the cancellation.
** Use case ends.
	
=== Non Functional Requirements

. Should work on any mainstream OS as long as it has Java 11 or above installed
. Should be able to hold up to 200 tasks/events without performance deterioration
. A user with above-average typing speed for regular English Text should be able to store their tasks faster using commands than using the mouse

[appendix]
== Glossary
[[mainstream-os]] Mainstream OS::
Windows, Linux, Unix, OS-X

[appendix]
== Instructions for Manual Testing

[NOTE]
The instructions and sample test cases only act as a guidance for you to start testing on some of our application features. You are free to test our features with more test cases of your own. Refer to <<Prerequisites>> for the instructions to set up our program on your computer.

=== Managing your semesters

=== Tracking your time spent on tasks

=== Setting recurring tasks

==== Selecting the `task` to be recurred
+1.+ You should use the `list` command to list the `tasks` you have added to *OOF*. +
+2.+ Keep in mind the `task` you wish to recur.

==== Choosing the `number of recurrences` and `frequency`
+3.+ A valid `number of recurrence` is an integer between `1 - 10`. You can choose a valid number within this range. +
+4.+ A valid `frequency` is an integer from `1 - 4` representing `DAILY`, `WEEKLY`, `MONTHLY` and `YEARLY` respectively. You can choose a valid `frequency` within this range.

==== Entering the command
+5.+ You can then proceed to enter a command based on the parameters you have chosen. +

[NOTE]
The command is in the format `recurring INDEX NUMBER_OF_RECURRENCES FREQUENCY`. +
`INDEX` refers to the `index` of the `task` you have chosen in step `2`. +
`NUMBER_OF_RECURRENCES` refers to the number you have chosen in step `3`. +
`FREQUENCY` refers to the number you have chosen in step `4`. +
You are free to test out this command with variations of the three parameters.

=== Finding free time slots

=== Viewing your tasks in a calendar format 

=== Viewing your tasks for a week in a tabular format

==== Understanding the parameters
The `viewweek` command syntax is as such: `viewweek DD MM YYYY`.

[NOTE]
The `date` parameters `DD`, `MM` and `YYYY` are optional. If the `date` is not entered, the current week will be selected. Similarly, if there is an error in the `date` supplied, the feature will ignore the the inputted `date` and print `tasks` for the current week.

==== Testing the command
You can enter the command `viewweek` to view `tasks` for the current week. +
You are free to enter a `date` of your choice and observe the output of this command.
